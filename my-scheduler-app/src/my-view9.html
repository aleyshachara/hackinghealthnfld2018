<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="shared-styles.html">

<dom-module id="my-view9">
  <template>
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
  <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
    <style include="shared-styles">
      :host {
        display: block;

        padding: 10px;
      }

      .draggable:hover{
        cursor: move;
      }
      table {
        width: 100%;
      }
    </style>

    <div class="mdl-grid">
      <div class="mdl-cell mdl-cell--12-col">
        <table class="mdl-data-table mdl-js-data-table">
          <thead>
            <tr>
              <th class="mdl-data-table__cell--non-numeric">Referral Id</th>
              <th class="mdl-data-table__cell--non-numeric">Region</th>
              <th class="mdl-data-table__cell--non-numeric">Patient Name</th>
              <th class="mdl-data-table__cell--non-numeric">Appointment Length (hrs)</th>
            </tr>
          </thead>
          <tbody>
            <template is="dom-repeat" items="[[referrals]]">
              <tr class="draggable listed" draggable="true" draggable="true" on-dragstart="handleDragStart"
                on-drop="handleDropped">
                <td class="mdl-data-table__cell--non-numeric">[[item.referralIdentifier]]</td>
                <td class="mdl-data-table__cell--non-numeric">[[item.region]]</td>
                <td class="mdl-data-table__cell--non-numeric">
                  [[item.lastName]], [[item.firstName]]
                  <br>[[item.patientIdentifier]]
                </td>
                <td class="mdl-data-table__cell--non-numeric">[[item.length]]</td>
              </tr>
            </template>
          </tbody>
        </table>
      </div>
    </div>
  </template>

  <script>
    class MyView9 extends Polymer.Element {
      static get is() { return 'my-view9'; }

      handleDragStart(event) {
        this.eventSource = event.target;
        this.eventSourceItem = event.model.item;
        event.dataTransfer.setData("text/plain", JSON.stringify(event.model.item));
        var img = document.createElement("img");
        img.src = "../images/cal.png";
        event.dataTransfer.setDragImage(img, 0, 0);
        event.dataTransfer.effectAllowed = "move";
      }

      handleDropped(event) {
        event.preventDefault();
        event.stopPropagation();
        console.log(event);
      }

      static get properties() {
        return {
          eventSource: {
            notify: true
          },
          eventSourceItem: {
            type: Object,
            notify: true
          },
          referrals : {
            type: Array,
            value: [{"referralIdentifier":"EH-2018-0006","region":"Eastern Health","site":null,"patientId":"5a57c6299beb7e5015f25741","patientIdentifier":"MCP 119631473715","patientType":null,"firstName":"MARIANO_TPCHI","lastName":"ANTHONY","status":"RefInProg","statusDate":"17-Jan-2018","referringPhysician":"Aleysha Mullen","urgencyRating":null,"timiRiskScore":null,"timiTimiMaxRecWaitTime":null,"timiStemiRiskScore":null,"timiStemiTimiMaxRecWaitTime":null,"oursUrgencyRatingScore":null,"oursMaxRecWaitTime":null,"overrideReqMaxWaitTime":null,"score":null,"maxRecWaitTime":null,"referralAcceptedDate":null,"maxRecWaitTimeDH":null,"percentageOverWaitTime":null,"reasonsForReferral":[],"proceduresRequested":[],"referralStatus":[], "length": 1},
            {"referralIdentifier":"EH-2018-0011","region":"Eastern Health","site":null,"patientId":"5a5e39439beb7e0e8822e361","patientIdentifier":"eCID 1002705743","patientType":null,"firstName":"KINE","lastName":"DIOP","status":"RefInProg","statusDate":"21-Jan-2018","referringPhysician":"Aleysha Mullen","urgencyRating":null,"timiRiskScore":null,"timiTimiMaxRecWaitTime":null,"timiStemiRiskScore":null,"timiStemiTimiMaxRecWaitTime":null,"oursUrgencyRatingScore":null,"oursMaxRecWaitTime":null,"overrideReqMaxWaitTime":null,"score":null,"maxRecWaitTime":null,"referralAcceptedDate":null,"maxRecWaitTimeDH":null,"percentageOverWaitTime":null,"reasonsForReferral":[],"proceduresRequested":[],"referralStatus":[], "length": 1} ,
            {"referralIdentifier":"CH-2018-0007","region":"Central Health","site":null,"patientId":"5a57c6299beb7e5015f25741","patientIdentifier":"MCP 119631473715","patientType":null,"firstName":"MARIANO_TPCHI","lastName":"ANTHONY","status":"RefInProg","statusDate":"17-Jan-2018","referringPhysician":"Aleysha Mullen","urgencyRating":null,"timiRiskScore":null,"timiTimiMaxRecWaitTime":null,"timiStemiRiskScore":null,"timiStemiTimiMaxRecWaitTime":null,"oursUrgencyRatingScore":null,"oursMaxRecWaitTime":null,"overrideReqMaxWaitTime":null,"score":null,"maxRecWaitTime":null,"referralAcceptedDate":null,"maxRecWaitTimeDH":null,"percentageOverWaitTime":null,"reasonsForReferral":[],"proceduresRequested":[],"referralStatus":[], "length": 2},
            {"referralIdentifier":"OP-2018-0002","region":"Out of Province","site":null,"patientId":"5a57c6299beb7e5015f25741","patientIdentifier":"MCP 119631473715","patientType":null,"firstName":"MARIANO_TPCHI","lastName":"ANTHONY","status":"RefInProg","statusDate":"17-Jan-2018","referringPhysician":"Aleysha Mullen","urgencyRating":null,"timiRiskScore":null,"timiTimiMaxRecWaitTime":null,"timiStemiRiskScore":null,"timiStemiTimiMaxRecWaitTime":null,"oursUrgencyRatingScore":null,"oursMaxRecWaitTime":null,"overrideReqMaxWaitTime":null,"score":null,"maxRecWaitTime":null,"referralAcceptedDate":null,"maxRecWaitTimeDH":null,"percentageOverWaitTime":null,"reasonsForReferral":[],"proceduresRequested":[],"referralStatus":[], "length": 1.5},
            {"referralIdentifier":"LG-2018-0006","region":"Labrador-Grenfell Health","site":null,"patientId":"5a57c6299beb7e5015f25741","patientIdentifier":"MCP 119631473715","patientType":"IN","firstName":"MARIANO_TPCHI","lastName":"ANTHONY","status":"RefInProg","statusDate":"19-Jan-2018","referringPhysician":"Aleysha Mullen","urgencyRating":null,"timiRiskScore":null,"timiTimiMaxRecWaitTime":null,"timiStemiRiskScore":null,"timiStemiTimiMaxRecWaitTime":null,"oursUrgencyRatingScore":null,"oursMaxRecWaitTime":null,"overrideReqMaxWaitTime":null,"score":null,"maxRecWaitTime":null,"referralAcceptedDate":null,"maxRecWaitTimeDH":null,"percentageOverWaitTime":null,"reasonsForReferral":[],"proceduresRequested":[],"referralStatus":[], "length": 1},
            {"referralIdentifier":"EH-2018-0009","region":"Eastern Health","site":null,"patientId":"59ee460c546d21472f950119","patientIdentifier":"MCP 229550598788","patientType":null,"firstName":"KIRBY_TPCHI_XXXXXXXXX","lastName":"CAIN_XXXXXXXXXXXXXXXXXXX","status":"RefInProg","statusDate":"19-Jan-2018","referringPhysician":"Aleysha Mullen","urgencyRating":null,"timiRiskScore":null,"timiTimiMaxRecWaitTime":null,"timiStemiRiskScore":null,"timiStemiTimiMaxRecWaitTime":null,"oursUrgencyRatingScore":null,"oursMaxRecWaitTime":null,"overrideReqMaxWaitTime":null,"score":null,"maxRecWaitTime":null,"referralAcceptedDate":null,"maxRecWaitTimeDH":null,"percentageOverWaitTime":null,"reasonsForReferral":[],"proceduresRequested":[],"referralStatus":[], "length": 2},
            {"referralIdentifier":"OC-2018-0004","region":"Out of Country","site":null,"patientId":"5a5e39439beb7e0e8822e361","patientIdentifier":"eCID 1002705743","patientType":"IN","firstName":"KINE","lastName":"DIOP","status":"RefInProg","statusDate":"19-Jan-2018","referringPhysician":"Aleysha Mullen","urgencyRating":null,"timiRiskScore":null,"timiTimiMaxRecWaitTime":null,"timiStemiRiskScore":null,"timiStemiTimiMaxRecWaitTime":null,"oursUrgencyRatingScore":null,"oursMaxRecWaitTime":null,"overrideReqMaxWaitTime":null,"score":null,"maxRecWaitTime":null,"referralAcceptedDate":null,"maxRecWaitTimeDH":null,"percentageOverWaitTime":null,"reasonsForReferral":[],"proceduresRequested":[],"referralStatus":[], "length": 1},
            {"referralIdentifier":"OC-2018-0005","region":"Out of Country","site":null,"patientId":"5a5e39439beb7e0e8822e361","patientIdentifier":"eCID 1002705743","patientType":null,"firstName":"KINE","lastName":"DIOP","status":"RefInProg","statusDate":"21-Jan-2018","referringPhysician":"Aleysha Mullen","urgencyRating":null,"timiRiskScore":null,"timiTimiMaxRecWaitTime":null,"timiStemiRiskScore":null,"timiStemiTimiMaxRecWaitTime":null,"oursUrgencyRatingScore":null,"oursMaxRecWaitTime":null,"overrideReqMaxWaitTime":null,"score":null,"maxRecWaitTime":null,"referralAcceptedDate":null,"maxRecWaitTimeDH":null,"percentageOverWaitTime":null,"reasonsForReferral":[],"proceduresRequested":[],"referralStatus":[], "length": 2.5},
            {"referralIdentifier":"WH-2018-0008","region":"Western Health","site":null,"patientId":"5a57c6299beb7e5015f25741","patientIdentifier":"MCP 119631473715","patientType":null,"firstName":"MARIANO_TPCHI","lastName":"ANTHONY","status":"RefInProg","statusDate":"21-Jan-2018","referringPhysician":"Aleysha Mullen","urgencyRating":null,"timiRiskScore":null,"timiTimiMaxRecWaitTime":null,"timiStemiRiskScore":null,"timiStemiTimiMaxRecWaitTime":null,"oursUrgencyRatingScore":null,"oursMaxRecWaitTime":null,"overrideReqMaxWaitTime":null,"score":null,"maxRecWaitTime":null,"referralAcceptedDate":null,"maxRecWaitTimeDH":null,"percentageOverWaitTime":null,"reasonsForReferral":[],"proceduresRequested":[],"referralStatus":[], "length": 1},
            {"referralIdentifier":"LG-2018-0007","region":"Labrador-Grenfell Health","site":null,"patientId":"5a5e39439beb7e0e8822e361","patientIdentifier":"eCID 1002705743","patientType":null,"firstName":"KINE","lastName":"DIOP","status":"RefInProg","statusDate":"21-Jan-2018","referringPhysician":"Aleysha Mullen","urgencyRating":null,"timiRiskScore":null,"timiTimiMaxRecWaitTime":null,"timiStemiRiskScore":null,"timiStemiTimiMaxRecWaitTime":null,"oursUrgencyRatingScore":null,"oursMaxRecWaitTime":null,"overrideReqMaxWaitTime":null,"score":null,"maxRecWaitTime":null,"referralAcceptedDate":null,"maxRecWaitTimeDH":null,"percentageOverWaitTime":null,"reasonsForReferral":[],"proceduresRequested":[],"referralStatus":[], "length": 1},
            {"referralIdentifier":"EH-2018-0008","region":"Eastern Health","site":null,"patientId":"5a57c6299beb7e5015f25741","patientIdentifier":"MCP 119631473715","patientType":null,"firstName":"MARIANO_TPCHI","lastName":"ANTHONY","status":"RefInProg","statusDate":"19-Jan-2018","referringPhysician":"Aleysha Mullen","urgencyRating":null,"timiRiskScore":null,"timiTimiMaxRecWaitTime":null,"timiStemiRiskScore":null,"timiStemiTimiMaxRecWaitTime":null,"oursUrgencyRatingScore":null,"oursMaxRecWaitTime":null,"overrideReqMaxWaitTime":null,"score":null,"maxRecWaitTime":null,"referralAcceptedDate":null,"maxRecWaitTimeDH":null,"percentageOverWaitTime":null,"reasonsForReferral":[],"proceduresRequested":[],"referralStatus":[], "length": 1},
            {"referralIdentifier":"WH-2018-0007","region":"Western Health","site":null,"patientId":"5a57c6299beb7e5015f25741","patientIdentifier":"MCP 119631473715","patientType":null,"firstName":"MARIANO_TPCHI","lastName":"ANTHONY","status":"RefInProg","statusDate":"21-Jan-2018","referringPhysician":"Aleysha Mullen","urgencyRating":null,"timiRiskScore":null,"timiTimiMaxRecWaitTime":null,"timiStemiRiskScore":null,"timiStemiTimiMaxRecWaitTime":null,"oursUrgencyRatingScore":null,"oursMaxRecWaitTime":null,"overrideReqMaxWaitTime":null,"score":null,"maxRecWaitTime":null,"referralAcceptedDate":null,"maxRecWaitTimeDH":null,"percentageOverWaitTime":null,"reasonsForReferral":[],"proceduresRequested":[],"referralStatus":[], "length": 1.5},
            {"referralIdentifier":"WH-2018-0006","region":"Western Health","site":null,"patientId":"5a57c6299beb7e5015f25741","patientIdentifier":"MCP 119631473715","patientType":null,"firstName":"MARIANO_TPCHI","lastName":"ANTHONY","status":"RefInProg","statusDate":"19-Jan-2018","referringPhysician":"Aleysha Mullen","urgencyRating":null,"timiRiskScore":null,"timiTimiMaxRecWaitTime":null,"timiStemiRiskScore":null,"timiStemiTimiMaxRecWaitTime":null,"oursUrgencyRatingScore":null,"oursMaxRecWaitTime":null,"overrideReqMaxWaitTime":null,"score":null,"maxRecWaitTime":null,"referralAcceptedDate":null,"maxRecWaitTimeDH":null,"percentageOverWaitTime":null,"reasonsForReferral":[],"proceduresRequested":[],"referralStatus":[], "length": 2},
            {"referralIdentifier":"LG-2018-0005","region":"Labrador-Grenfell Health","site":null,"patientId":"5a57c6299beb7e5015f25741","patientIdentifier":"MCP 119631473715","patientType":null,"firstName":"MARIANO_TPCHI","lastName":"ANTHONY","status":"RefInProg","statusDate":"19-Jan-2018","referringPhysician":"Aleysha Mullen","urgencyRating":null,"timiRiskScore":null,"timiTimiMaxRecWaitTime":null,"timiStemiRiskScore":null,"timiStemiTimiMaxRecWaitTime":null,"oursUrgencyRatingScore":null,"oursMaxRecWaitTime":null,"overrideReqMaxWaitTime":null,"score":null,"maxRecWaitTime":null,"referralAcceptedDate":null,"maxRecWaitTimeDH":null,"percentageOverWaitTime":null,"reasonsForReferral":[],"proceduresRequested":[],"referralStatus":[], "length": 1},
            {"referralIdentifier":"LG-2018-0004","region":"Labrador-Grenfell Health","site":null,"patientId":"5a57c6299beb7e5015f25741","patientIdentifier":"MCP 119631473715","patientType":null,"firstName":"MARIANO_TPCHI","lastName":"ANTHONY","status":"RefInProg","statusDate":"19-Jan-2018","referringPhysician":"Aleysha Mullen","urgencyRating":null,"timiRiskScore":null,"timiTimiMaxRecWaitTime":null,"timiStemiRiskScore":null,"timiStemiTimiMaxRecWaitTime":null,"oursUrgencyRatingScore":null,"oursMaxRecWaitTime":null,"overrideReqMaxWaitTime":null,"score":null,"maxRecWaitTime":null,"referralAcceptedDate":null,"maxRecWaitTimeDH":null,"percentageOverWaitTime":null,"reasonsForReferral":[],"proceduresRequested":[],"referralStatus":[], "length": 1},
            {"referralIdentifier":"WH-2018-0005","region":"Western Health","site":null,"patientId":"5a5e39439beb7e0e8822e361","patientIdentifier":"eCID 1002705743","patientType":null,"firstName":"KINE","lastName":"DIOP","status":"RefInProg","statusDate":"19-Jan-2018","referringPhysician":"Aleysha Mullen","urgencyRating":null,"timiRiskScore":null,"timiTimiMaxRecWaitTime":null,"timiStemiRiskScore":null,"timiStemiTimiMaxRecWaitTime":null,"oursUrgencyRatingScore":null,"oursMaxRecWaitTime":null,"overrideReqMaxWaitTime":null,"score":null,"maxRecWaitTime":null,"referralAcceptedDate":null,"maxRecWaitTimeDH":null,"percentageOverWaitTime":null,"reasonsForReferral":[],"proceduresRequested":[],"referralStatus":[], "length": 2},
            {"referralIdentifier":"OC-2018-0002","region":"Out of Country","site":"SPH","patientId":"59ee460c546d21472f950119","patientIdentifier":"MCP 229550598788","patientType":"IN","firstName":"KIRBY_TPCHI_XXXXXXXXX","lastName":"CAIN_XXXXXXXXXXXXXXXXXXX","status":"RefInProg","statusDate":"11-Jan-2018","referringPhysician":"Joanna Bloggs","urgencyRating":null,"timiRiskScore":7,"timiTimiMaxRecWaitTime":"48","timiStemiRiskScore":null,"timiStemiTimiMaxRecWaitTime":null,"oursUrgencyRatingScore":null,"oursMaxRecWaitTime":null,"overrideReqMaxWaitTime":null,"score":null,"maxRecWaitTime":null,"referralAcceptedDate":null,"maxRecWaitTimeDH":null,"percentageOverWaitTime":null,"reasonsForReferral":[{"reason":"NSTE","otherType":null,"otherDesc":null}],"proceduresRequested":[{"procedure":"TAVR","reason":"","otherDescription":""}],"referralStatus":[], "length": 1},
            {"referralIdentifier":"EH-2018-0010","region":"Eastern Health","site":null,"patientId":"5a5e39439beb7e0e8822e361","patientIdentifier":"eCID 1002705743","patientType":"IN","firstName":"KINE","lastName":"DIOP","status":"RefInProg","statusDate":"19-Jan-2018","referringPhysician":"Aleysha Mullen","urgencyRating":null,"timiRiskScore":null,"timiTimiMaxRecWaitTime":null,"timiStemiRiskScore":null,"timiStemiTimiMaxRecWaitTime":null,"oursUrgencyRatingScore":null,"oursMaxRecWaitTime":null,"overrideReqMaxWaitTime":null,"score":null,"maxRecWaitTime":null,"referralAcceptedDate":null,"maxRecWaitTimeDH":null,"percentageOverWaitTime":null,"reasonsForReferral":[{"reason":"NSTE","otherType":null,"otherDesc":null}],"proceduresRequested":[],"referralStatus":[], "length": 1}]
          }
        }
      }


    }

    window.customElements.define(MyView9.is, MyView9);
  </script>
</dom-module>
